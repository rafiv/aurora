{% extends "base.html" %}

{% block additional_headers %}
<script type="text/javascript" src="{{ STATIC_URL }}js/profile.js"></script>
<link rel="stylesheet" href="{{ STATIC_URL }}css/profile.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="{{ STATIC_URL }}lightbox/css/lightbox.css" type="text/css" media="screen"/>
{% endblock %}




{% block content %}

<script>

  var PROFILE_SAVE_URL = "{% url 'User:save' course_short_title=course.short_title %}";

</script>

<div id="detail_area">
{% if error %}
  <div class="error">{{ error }}</div>
{% endif %}
  <table id="profile">
    <tr class="formRow">
      <td>
        <label for="nickname">Nickname</label>
      </td>
      <td>
        <input id="nickname" type="text" name="nickname" value="{{ user.nickname }}" class="focusable">
      </td>
		  <td class="legend">
			  visible to everyone.
		  </td>
    </tr>
    <tr class="formRow">
      <td>
        <label for="name">Name</label>
      </td>
      <td>
        <input id="name" type="text" name="name" value="{{ user.first_name }} {{ user.last_name }}" readonly tabindex=1000>
      </td>
		  <td class="legend">
	  		private. cannot be changed.
  		</td>
    </tr>
    <tr class="formRow">
      <td>
        <label for="matriculation_number">Matriculation Number</label>
      </td>
      <td>
        <input id="matriculation_number" type="text" name="matriculation_number" value="{{ user.matriculation_number }}" readonly tabindex=1000>
      </td>
		<td class="legend">
	  		private. cannot be changed.
  		</td>
    </tr>
    <tr class="formRow">
      <td>
        <label for="study_code">Study code</label>
      </td>
      <td>
        <input id="study_code" type="text" name="study_code" value="{{ user.study_code }}" class="focusable">
      </td>
      <td class="legend">
        private. click in field to see choices.<br>
      </td>
    </tr>
	<tr class="correct_maker versteck">
		<td></td>
		<td>
			<DIV class="bno">Type a study code, or select one of these: </DIV>
			<DIV class="bmi button">Medieninformatik &amp; Visual Computing - 033532</DIV>
			<DIV class="bmz button">Medizinische Informatik - 033533</DIV>
			<DIV class="bsi button">Software &amp; Information Engineering - 033534</DIV>
			<DIV class="bti button">Technische Informatik - 033535</DIV>
			
		</td><td></td>
	</tr>
    <tr class="formRow">
      <td>
        <label for="statement">Statement</label>
      </td>
      <td>
        <input id="statement" type="text" name="statement" value="{{ user.statement }}" class="focusable">
      </td>
      <td class="legend">
        a sentence about yourself. visible to everyone.
      </td>
    </tr>
    <tr class="formRow">
      <td>
        <label for="email">E-Mail</label>
      </td>
      <td>
        <input id="email" type="text" name="email" value="{{ user.email }}" class="focusable">
      </td>
      <td class="legend">
        private.
      </td>
    </tr>
    <tr class="formRow">
      <td class="avatar_label">
        <label for="avatar">Avatar</label>
      </td>
      <td>
        <div class="avatar"><img id="profile_avatar" class="avatar_img" src="{{ user.avatar.url }}" alt="Avatar"> <div class="subtitle">(click to edit)</div></div>
        <form id="file_upload_form" action="/fileupload">
          <input id="user_id" type="text" name="user_id" value="{{ user.id }}" hidden style="display:none">
          <input id="file_upload_input" type="file" accept="image/*" hidden style="display:none">
        </form>
      </td>
      <td class="legend avatar_label">
        visible to everyone.
      </td>
    </tr>
    <tr class="formRow">
      <td></td>
	  <td align="right"><input class="button XL" type="button" value="SAVE" onclick="$('#saved_message').delay(150).fadeIn(250).delay(250).fadeOut(2000)"></td>
	  <td><div class="hidden_text" id="saved_message"><i class="fa fa-check green"></i></div></td>
	</tr>
    </table>
    <div id="error"></div>
  </div>

{% endblock %}
